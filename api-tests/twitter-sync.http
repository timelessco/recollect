### Sync Twitter Tweet (Success)
POST {{$dotenv API_BASE_URL}}/v1/twitter/sync
Authorization: Bearer {{$dotenv USER_TOKEN}}
Content-Type: application/json

{
  "data": [{
    "url": "https://x.com/SawyerMerritt/status/1986170355535286529",
    "title": "Sawyer Merritt",
    "description": "BREAKING: SpaceX has announced that @Starlink now has over 8 million customers, up from 7M in August and 6M in June 2025.\n\nStarlink added a record 14,250 new customers on average per day since they hit 7M, beating their previous record of 12,200. That growth rate is 17% higher https://t.co/IahhZW...",
    "type": "tweet",
    "ogImage": "https://pbs.twimg.com/media/G5BK9fuXcAAXZ5Y.jpg",
    "meta_data": {
      "favIcon": "https://t1.gstatic.com/faviconV2?client=SOCIAL&type=FAVICON&fallback_opts=TYPE,SIZE,URL&url=http://x.com&size=128",
      "twitter_avatar_url": "https://pbs.twimg.com/profile_images/1837744842715082752/xH9vYixL_normal.jpg"
    },
    "inserted_at": "2026-01-28T17:00:54.472+00:00",
    "sort_index": "1848019423856806627",
  }]
}

### Sync Multiple Tweets (with different sort_index for ordering)
POST {{$dotenv API_BASE_URL}}/v1/twitter/sync
Authorization: Bearer {{$dotenv USER_TOKEN}}
Content-Type: application/json

{
  "data": [
    {
      "url": "https://x.com/narendramodi/status/1984243645050945961",
      "title": "Narendra Modi",
      "description": "First batch tweet",
      "type": "tweet",
      "ogImage": null,
      "sort_index": "1847926557696091535",
      "meta_data": {
        "favIcon": "https://t1.gstatic.com/faviconV2?client=SOCIAL&type=FAVICON&fallback_opts=TYPE,SIZE,URL&url=http://x.com&size=128",
        "twitter_avatar_url": "https://pbs.twimg.com/profile_images/1833509376528945157/5AeMNn9f_normal.jpg"
      },
        "inserted_at": "2026-01-28T16:59:49.475+00:00",
        "sort_index": "1847926557696091535",

    },
    {
      "url": "https://x.com/elonmusk/status/1985699323099713668",
      "title": "Elon Musk",
      "description": "Second batch tweet",
      "type": "tweet",
      "ogImage": null,
      "sort_index": "1847927476774215422",
      "meta_data": {
        "favIcon": "https://t1.gstatic.com/faviconV2?client=SOCIAL&type=FAVICON&fallback_opts=TYPE,SIZE,URL&url=http://x.com&size=128",
        "twitter_avatar_url": "https://pbs.twimg.com/profile_images/2008546467615580160/57KcqsTA_normal.jpg",
      }
    }
  ]
}

### Sync Tweet with All Optional Fields
POST {{$dotenv API_BASE_URL}}/v1/twitter/sync
Authorization: Bearer {{$dotenv USER_TOKEN}}
Content-Type: application/json

{
  "data": [{
    "url": "https://www.x.com/testuser/status/FULL001",
    "title": "Full Tweet",
    "description": "Tweet with all fields",
    "type": "tweet",
    "ogImage": "https://pbs.twimg.com/media/full.jpg",
    "sort_index": "150",
    "inserted_at": "2024-01-15T10:30:00.000Z",
    "category_name": "Test Category",
    "meta_data": {
      "favIcon": "https://abs.twimg.com/favicons/twitter.3.ico",
      "twitter_avatar_url": "https://pbs.twimg.com/profile_images/avatar.jpg",
      "video_url": "https://video.twimg.com/ext_tw_video/video.mp4"
    }
  }]
}

### Validation Error - Empty Data Array
# Expected: 400 - Validation error (Zod schema validation)
POST {{$dotenv API_BASE_URL}}/v1/twitter/sync
Authorization: Bearer {{$dotenv USER_TOKEN}}
Content-Type: application/json

{
  "data": []
}

### Auth Error - No Token
POST {{$dotenv API_BASE_URL}}/v1/twitter/sync
Content-Type: application/json

{
  "data": [{
    "url": "https://x.com/interesting_aIl/status/2009045432358367692",
    "title": "No Auth Test",
    "description": "Test without auth",
    "type": "tweet",
    "ogImage": null,
    "sort_index": "100",
    "meta_data": {
      "favIcon": "https://abs.twimg.com/favicons/twitter.3.ico"
    }
  }]
}

### Validation Error - Invalid URL Format (not a URL)
# Expected: 400 - Validation error
POST {{$dotenv API_BASE_URL}}/v1/twitter/sync
Authorization: Bearer {{$dotenv USER_TOKEN}}
Content-Type: application/json

{
  "data": [{
    "url": "not-a-valid-url",
    "title": "Invalid URL Test",
    "description": "Test description",
    "type": "tweet",
    "ogImage": null,
    "sort_index": "100",
    "meta_data": {
      "favIcon": "https://abs.twimg.com/favicons/twitter.3.ico"
    }
  }]
}


### Validation Error - Missing Required Field (favIcon)
# Expected: 400 - Validation error (favIcon is required in meta_data)
POST {{$dotenv API_BASE_URL}}/v1/twitter/sync
Authorization: Bearer {{$dotenv USER_TOKEN}}
Content-Type: application/json

{
  "data": [{
    "url": "https://x.com/testuser/status/MISSING_FAVICON",
    "title": "Missing FavIcon Test",
    "description": "Test description",
    "type": "tweet",
    "ogImage": null,
    "sort_index": "100",
    "meta_data": {}
  }]
}

### Validation Error - Missing Required Field (sort_index)
# Expected: 400 - Validation error (sort_index is required)
POST {{$dotenv API_BASE_URL}}/v1/twitter/sync
Authorization: Bearer {{$dotenv USER_TOKEN}}
Content-Type: application/json

{
  "data": [{
    "url": "https://x.com/testuser/status/MISSING_SORT",
    "title": "Missing Sort Index Test",
    "description": "Test description",
    "type": "tweet",
    "ogImage": null,
    "meta_data": {
      "favIcon": "https://abs.twimg.com/favicons/twitter.3.ico"
    }
  }]
}

### Validation Error - Missing Required Field (description)
# Expected: 400 - Validation error (description is required)
POST {{$dotenv API_BASE_URL}}/v1/twitter/sync
Authorization: Bearer {{$dotenv USER_TOKEN}}
Content-Type: application/json

{
  "data": [{
    "url": "https://x.com/testuser/status/MISSING_DESC",
    "title": "Missing Description Test",
    "type": "tweet",
    "ogImage": null,
    "sort_index": "100",
    "meta_data": {
      "favIcon": "https://abs.twimg.com/favicons/twitter.3.ico"
    }
  }]
}


### Duplicate Detection - All URLs Already Exist
# Expected: 404 - { success: true, error: "No data to insert", data: [] }
# This happens when all URLs in the payload already exist for this user
POST {{$dotenv API_BASE_URL}}/v1/twitter/sync
Authorization: Bearer {{$dotenv USER_TOKEN}}
Content-Type: application/json

{
  "data": [{
    "url": "https://x.com/testuser/status/DUPLICATE",
    "title": "Duplicate Test",
    "description": "This URL already exists",
    "type": "tweet",
    "ogImage": null,
    "sort_index": "100",
    "meta_data": {
      "favIcon": "https://abs.twimg.com/favicons/twitter.3.ico"
    }
  }]
}
