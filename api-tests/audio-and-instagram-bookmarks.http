###############################################################################
# Audio & Instagram bookmarks â€“ API tests and step-by-step verification
###############################################################################

### Step 1: Add Audio Bookmark
# Expected: 200, { data: [...], error: null, message: "Min bookmark data inserted successfully" }
# Creates a bookmark with meta_data.mediaType set to audio MIME type (e.g. audio/mpeg)
POST {{$dotenv API_BASE_URL}}/bookmark/add-bookmark-min-data
Authorization: Bearer {{$dotenv USER_TOKEN}}
Content-Type: application/json

{
  "url": "https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3",
  "category_id": null,
  "update_access": true
}

### Step 2: Add Instagram Bookmark
# Expected: 200, { success: true, error: null }
# Creates a bookmark with type="instagram" directly
POST {{$dotenv API_BASE_URL}}/v1/bookmarks/insert
Authorization: Bearer {{$dotenv USER_TOKEN}}
Content-Type: application/json

{
  "data": [{
    "url": "https://www.instagram.com/p/TEST123/",
    "title": "Test Instagram Post",
    "description": "Sample Instagram bookmark for testing",
    "type": "instagram",
    "ogImage": null
  }]
}

### Step 3: Fetch Audio Bookmarks (audios view)
# Expected: 200, { data: [...], count: { ... }, error: null }
# Each bookmark in data should have type matching an audio MIME (e.g. audio/mpeg) 
# or meta_data.mediaType set to an audio MIME type
GET {{$dotenv API_BASE_URL}}/bookmark/fetch-bookmarks-data?category_id=audios&from=0
Authorization: Bearer {{$dotenv USER_TOKEN}}

### Step 4: Fetch Instagram Bookmarks (instagram view)
# Expected: 200, { data: [...], count: { ... }, error: null }
# Each bookmark in data should have type === "instagram"
GET {{$dotenv API_BASE_URL}}/bookmark/fetch-bookmarks-data?category_id=instagram&from=0
Authorization: Bearer {{$dotenv USER_TOKEN}}

